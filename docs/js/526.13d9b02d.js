"use strict";(self["webpackChunkmaizuo"]=self["webpackChunkmaizuo"]||[]).push([[526],{4988:function(t,e,s){var a=s(7350);e.A={inserted(t,e){const s=new IntersectionObserver((i=>{i[0].isIntersecting&&(a.Ay.set(e.value,"show",!0),s.unobserve(t))}),{threshold:[0]});s.observe(t)}}},1057:function(t,e,s){s.d(e,{A:function(){return l}});var a=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"step",mode:"out-in",appear:!0}},[t._t("default")],2)},i=[],n=s(4068),r={},o=(0,n.A)(r,a,i,!1,null,"18c90fb7",null),l=o.exports},6526:function(t,e,s){s.r(e),s.d(e,{default:function(){return h}});var a=function(){var t=this,e=t._self._c;return e("div",[t.dataList.length?e("ul",{staticClass:"filmsDetail"},t._l(t.dataList,(function(s){return e("li",{directives:[{name:"lazy",rawName:"v-lazy",value:s,expression:"item"}],key:s.filmId,on:{click:function(e){return t.handleChangePage(s.filmId)}}},[e("div",{staticClass:"imgBox"},[e("img-fade",[e("img",{directives:[{name:"show",rawName:"v-show",value:s.show,expression:"item.show"}],attrs:{src:s.poster,alt:""}})])],1),e("div",{staticClass:"FilmInformation"},[e("div",[e("span",{staticClass:"name"},[t._v(t._s(s.name)+" ")]),e("span",{staticClass:"item"},[t._v(t._s(s.filmType.name))])]),e("div",[e("span",{staticClass:"label"},[t._v("观众评分 "),e("span",{staticStyle:{color:"#ffb232"}},[t._v(t._s(s.grade))])])]),e("div",[e("span",{staticClass:"label"},[t._v("主演："),s.actors?e("span",[t._v(t._s(t._f("actors")(s.actors)))]):e("span",[t._v("暂无人员")])])]),e("div",[e("span",{staticClass:"label"},[t._v(t._s(s.nation)+" | "+t._s(s.runtime)+"分钟")])])]),e("div",{staticClass:"buy",on:{click:function(e){return e.stopPropagation(),t.buyTicket(s.filmId,s.name)}}},[t._v("购票")])])})),0):t._e(),t.show?e("div",{staticClass:"noMore"},[t._v("暂无更多")]):t._e()])},i=[],n=(s(3297),s(5422)),r=s(7350),o=s(4988),l=s(1057);r.Ay.filter("actors",(t=>t.map((t=>t.name)).join(" "))),r.Ay.directive("lazy",o.A);var c={data(){return{dataList:[],page:1,tag:!0,show:!0}},components:{ImgFade:l.A},methods:{buyTicket(t,e){this.$store.commit("setFilmInfo",{id:t,filmName:e}),this.$router.push({name:"电影视图",params:{filmName:e,myID:t}})},handleChangePage(t){this.$router.push({name:"详情",params:{myID:t}})},sendRequest(t){return(0,n.A)({url:`/gateway?cityId=${this.$store.state.cityId}&pageNum=${this.page++}&pageSize=10&type=1&k=70052`,headers:{"X-Host":"mall.film-ticket.film.list"}}).then((e=>{this.dataList.push(...e.data.data.films),this.dataList.length===e.data.data.total&&(this.tag=!1,t?.disconnect())}))}},async mounted(){await this.sendRequest(),this.$nextTick((()=>{const t=document.querySelector(".noMore"),e=new IntersectionObserver((t=>{t[0].isIntersecting&&this.tag&&this.sendRequest(e)}),{root:null,thresholds:1,rootMargin:"0px 0px 300px 0px"});e.observe(t)}))}},u=c,m=s(4068),d=(0,m.A)(u,a,i,!1,null,"49d21fa4",null),h=d.exports}}]);