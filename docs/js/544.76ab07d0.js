"use strict";(self["webpackChunkmaizuo"]=self["webpackChunkmaizuo"]||[]).push([[544],{5772:function(t,e,i){i(2760),i(4800),i(8603)},5104:function(t,e,i){i.d(e,{b:function(){return o},G:function(){return c}});i(3297);function n(t){var e=[];function i(t){t.forEach((function(t){e.push(t),t.componentInstance&&i(t.componentInstance.$children.map((function(t){return t.$vnode}))),t.children&&i(t.children)}))}return i(t),e}function r(t,e){var i=e.$vnode.componentOptions;if(i&&i.children){var r=n(i.children);t.sort((function(t,e){return r.indexOf(t.$vnode)-r.indexOf(e.$vnode)}))}}function o(t,e){var i,n;void 0===e&&(e={});var o=e.indexKey||"index";return{inject:(i={},i[t]={default:null},i),computed:(n={parent:function(){return this.disableBindRelation?null:this[t]}},n[o]=function(){return this.bindRelation(),this.parent?this.parent.children.indexOf(this):null},n),watch:{disableBindRelation:function(t){t||this.bindRelation()}},mounted:function(){this.bindRelation()},beforeDestroy:function(){var t=this;this.parent&&(this.parent.children=this.parent.children.filter((function(e){return e!==t})))},methods:{bindRelation:function(){if(this.parent&&-1===this.parent.children.indexOf(this)){var t=[].concat(this.parent.children,[this]);r(t,this.parent),this.parent.children=t}}}}}function c(t){return{provide:function(){var e;return e={},e[t]=this,e},data:function(){return{children:[]}}}}},8006:function(t,e,i){i.d(e,{Bn:function(){return r},TL:function(){return o},kw:function(){return s},n_:function(){return c},pT:function(){return l}});var n="van-hairline",r=n+"--top",o=n+"--left",c=n+"--bottom",s=n+"--surround",l=n+"--top-bottom"},5234:function(t,e,i){function n(t){var e=window.getComputedStyle(t),i="none"===e.display,n=null===t.offsetParent&&"fixed"!==e.position;return i||n}i.d(e,{d:function(){return n}})},9709:function(t,e,i){i.r(e),i.d(e,{default:function(){return _}});var n=function(){var t=this,e=t._self._c;return t.cityList.length?e("div",[e("div",{staticClass:"city-list"},[e("div",{staticClass:"header"},[e("span",{staticClass:"i",on:{click:function(e){return t.$router.back()}}},[e("van-icon",{attrs:{name:"cross"}})],1),e("span",[t._v("当前城市 - "+t._s(this.$store.state.cityName))]),t._v(" "),e("span")]),e("van-search",{attrs:{placeholder:"请输入搜索关键词","show-action":t.show},on:{focus:function(e){t.show=!0}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),e("div",{staticClass:"container"},[t.value?t._l(t.filterCity(),(function(i){return e("van-cell",{key:i.cityId,attrs:{title:i.name},on:{click:function(e){return t.selectCity(i)}}})})):e("van-index-bar",{attrs:{"index-list":t.computedList,"highlight-color":"var(--textColor)"},on:{select:t.currenIndex}},t._l(t.cityList,(function(i,n){return e("div",{key:n},[e("van-index-anchor",{attrs:{index:i.type}}),t._l(i.newList,(function(i){return e("van-cell",{key:i.cityId,attrs:{title:i.name},on:{click:function(e){return t.selectCity(i)}}})}))],2)})),0)],2)]):t._e()},r=[],o=(i(3297),i(5891),i(463)),c=(i(5772),i(8394)),s=(i(2760),i(4800),i(8603),i(6312),i(7343)),l=i(6483),h=i(5104),a=i(8006),u=i(118),d=(0,l.Y)("index-anchor"),f=d[0],p=d[1],v=f({mixins:[(0,h.b)("vanIndexBar",{indexKey:"childrenIndex"})],props:{index:[Number,String]},data:function(){return{top:0,left:null,rect:{top:0,height:0},width:null,active:!1}},computed:{sticky:function(){return this.active&&this.parent.sticky},anchorStyle:function(){if(this.sticky)return{zIndex:""+this.parent.zIndex,left:this.left?this.left+"px":null,width:this.width?this.width+"px":null,transform:"translate3d(0, "+this.top+"px, 0)",color:this.parent.highlightColor}}},mounted:function(){var t=this.$el.getBoundingClientRect();this.rect.height=t.height},methods:{scrollIntoView:function(){this.$el.scrollIntoView()},getRect:function(t,e){var i=this.$el,n=i.getBoundingClientRect();return this.rect.height=n.height,t===window||t===document.body?this.rect.top=n.top+(0,u.Td)():this.rect.top=n.top+(0,u.hY)(t)-e.top,this.rect}},render:function(){var t,e=arguments[0],i=this.sticky;return e("div",{style:{height:i?this.rect.height+"px":null}},[e("div",{style:this.anchorStyle,class:[p({sticky:i}),(t={},t[a.n_]=i,t)]},[this.slots("default")||this.index])])}}),m=i(664),y=i(5234),x=i(2611),g=i(6402),k=i(2591);function C(){for(var t=[],e="A".charCodeAt(0),i=0;i<26;i++)t.push(String.fromCharCode(e+i));return t}var I=(0,l.Y)("index-bar"),w=I[0],b=I[1],A=w({mixins:[g.B,(0,h.G)("vanIndexBar"),(0,k.x)((function(t){this.scroller||(this.scroller=(0,u.Rm)(this.$el)),t(this.scroller,"scroll",this.onScroll)}))],props:{zIndex:[Number,String],highlightColor:String,sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:Number,default:0},indexList:{type:Array,default:C}},data:function(){return{activeAnchorIndex:null}},computed:{sidebarStyle:function(){if((0,m.C8)(this.zIndex))return{zIndex:this.zIndex+1}},highlightStyle:function(){var t=this.highlightColor;if(t)return{color:t}}},watch:{indexList:function(){this.$nextTick(this.onScroll)},activeAnchorIndex:function(t){t&&this.$emit("change",t)}},methods:{onScroll:function(){var t=this;if(!(0,y.d)(this.$el)){var e=(0,u.hY)(this.scroller),i=this.getScrollerRect(),n=this.children.map((function(e){return e.getRect(t.scroller,i)})),r=this.getActiveAnchorIndex(e,n);this.activeAnchorIndex=this.indexList[r],this.sticky&&this.children.forEach((function(o,c){if(c===r||c===r-1){var s=o.$el.getBoundingClientRect();o.left=s.left,o.width=s.width}else o.left=null,o.width=null;if(c===r)o.active=!0,o.top=Math.max(t.stickyOffsetTop,n[c].top-e)+i.top;else if(c===r-1){var l=n[r].top-e;o.active=l>0,o.top=l+i.top-n[c].height}else o.active=!1}))}},getScrollerRect:function(){return this.scroller.getBoundingClientRect?this.scroller.getBoundingClientRect():{top:0,left:0}},getActiveAnchorIndex:function(t,e){for(var i=this.children.length-1;i>=0;i--){var n=i>0?e[i-1].height:0,r=this.sticky?n+this.stickyOffsetTop:0;if(t+r>=e[i].top)return i}return-1},onClick:function(t){this.scrollToElement(t.target)},onTouchMove:function(t){if(this.touchMove(t),"vertical"===this.direction){(0,x.wo)(t);var e=t.touches[0],i=e.clientX,n=e.clientY,r=document.elementFromPoint(i,n);if(r){var o=r.dataset.index;this.touchActiveIndex!==o&&(this.touchActiveIndex=o,this.scrollToElement(r))}}},scrollTo:function(t){var e=this.children.filter((function(e){return String(e.index)===t}));e[0]&&(e[0].scrollIntoView(),this.sticky&&this.stickyOffsetTop&&(0,u.Fk)((0,u.Td)()-this.stickyOffsetTop),this.$emit("select",e[0].index))},scrollToElement:function(t){var e=t.dataset.index;this.scrollTo(e)},onTouchEnd:function(){this.active=null}},render:function(){var t=this,e=arguments[0],i=this.indexList.map((function(i){var n=i===t.activeAnchorIndex;return e("span",{class:b("index",{active:n}),style:n?t.highlightStyle:null,attrs:{"data-index":i}},[i])}));return e("div",{class:b()},[e("div",{class:b("sidebar"),style:this.sidebarStyle,on:{click:this.onClick,touchstart:this.touchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[i]),this.slots("default")])}}),T=(i(4516),i(3716)),$=i(5422),S={data(){return{value:"",cityList:[],searchList:[],show:!1}},components:{[T.A.name]:T.A,[A.name]:A,[v.name]:v,[s.A.name]:s.A,[c.A.name]:c.A},mounted(){(0,$.A)({url:"/gateway?cityId=130600&ticketFlag=1&k=1173969",headers:{"X-Host":"mall.film-ticket.city.list"}}).then((t=>{this.searchList=t.data.data.cities,this.cityList=this.cityFilter(t.data.data.cities),this.$nextTick((()=>{}))}))},computed:{computedList(){return this.cityList.map((t=>t.type))}},methods:{filterCity(){return this.searchList.filter((t=>t.name.toUpperCase().includes(this.value.toUpperCase())||t.pinyin.toUpperCase().includes(this.value.toUpperCase())))},selectCity(t){this.$store.commit("selectCity"),this.$store.commit("changeCityId",t.cityId),this.$store.commit("changeCityName",t.name),this.$router.back()},currenIndex(t){(0,o.A)({message:t,duration:1e3})},cityFilter(t){let e=[],i=[];for(let n=65;n<91;n++)i.push(String.fromCharCode(n));return i.forEach((i=>{let n=t.filter((t=>t.pinyin[0].toUpperCase()===i));n.length>0&&e.push({type:i,newList:[...n]})})),[...e]}}},L=S,R=i(4068),B=(0,R.A)(L,n,r,!1,null,"649572ae",null),_=B.exports}}]);