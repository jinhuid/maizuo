(self["webpackChunkmaizuo"]=self["webpackChunkmaizuo"]||[]).push([[979],{6769:function(t){const e=function(t,e){const s={},a="日一二三四五六";let i=new Date(t);s.year=i.getFullYear()+"年",s.month=i.getMonth()+1+"月",s.day=i.getDate()+"日",s.hour=i.getHours().toString().padStart(2,"0"),s.minute=i.getMinutes().toString().padStart(2,"0"),s.week="星期"+a.charAt(i.getDay());const n=Date.now();if(e.includes("week")){t=t-36e5*s.hour-6e4*s.minute;const e=(t-n)/1e3;e>=-86400&&e<0?s.week="今天":e>=0&&e<86400?s.week="明天":e>=86400&&e<172800&&(s.week="后天")}return e.map((t=>s[t]||t)).join("")};t.exports=e},4134:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return f}});var a=function(){var t=this,e=t._self._c;return e("van-tabs",{attrs:{swipeable:!0,sticky:!0,"offset-top":Math.floor(t.headerHeight-1),animated:"","swipe-threshold":3,"title-active-color":"var(--textColor)"},on:{change:t.choose}},t._l(t.filmsInfo[t.currentIndex].showDate,(function(s,a){return e("van-tab",{key:a,staticClass:"tabList",attrs:{title:t.currenDate(1e3*s,["week","month","day"])}},[t.show?e("div",{staticClass:"loading"},[e("van-loading",{attrs:{type:"spinner",vertical:!0}})],1):t.schedules[a]?t._e():e("div",{staticClass:"null"},[e("img",{attrs:{src:"https://assets.maizuo.com/h5/v5/public/app/img/emptyFilmList.4e4721ad.png",alt:""}}),e("div",{staticClass:"text"},[t._v("暂无场次")])]),t._l(t.schedules[a],(function(s){return e("div",{key:s.scheduleId,staticClass:"schedule-item"},[e("div",{staticClass:"left"},[e("span",{staticClass:"top"},[t._v(t._s(t.currenDate(1e3*s.showAt,["hour",":","minute"])))]),e("span",{staticClass:"bottom"},[t._v(t._s(t.currenDate(1e3*s.endAt,["hour",":","minute"]))+"散场")])]),e("div",{staticClass:"middle"},[e("span",{staticClass:"top"},[t._v(t._s(s.filmLanguage)+t._s(s.imagery))]),e("span",{staticClass:"bottom"},[t._v(t._s(s.hallName))])]),e("div",{staticClass:"right"},[e("div",{staticClass:"lowest-price"},[e("span",{staticClass:"price-icon"},[t._v("￥")]),t._v(t._s(s.salePrice/100)+" ")]),e("div",{staticClass:"buy-ticket",on:{click:function(e){return t.buyTicket(s.scheduleId)}}},[t._v("购票")])])])}))],2)})),1)},i=[],n=(s(3297),s(2760),s(2436),s(3761)),c=(s(6814),s(5769)),l=(s(9331),s(690)),o=s(5422),r=s(6769),u=s.n(r),h={props:["filmsInfo","currentIndex","cinemaInfo"],data(){return{schedules:new Array(this.filmsInfo[this.currentIndex].showDate.length),show:!1,headerHeight:document.querySelector("header").clientHeight}},components:{[l.A.name]:l.A,[c.A.name]:c.A,[n.A.name]:n.A},mounted(){this.schedulesList(0)},methods:{buyTicket(t){this.$router.push({name:"schedule",params:{scheduleId:t}}).catch((()=>{}))},choose(t){this.schedules[t]||this.schedulesList(t)},schedulesList(t){this.show=!0,(0,o.A)({url:`/gateway/?filmId=${this.filmsInfo[this.currentIndex].filmId}&cinemaId=${this.cinemaInfo.cinemaId}&date=${this.filmsInfo[this.currentIndex].showDate[t]}&k=1024902`,headers:{"X-Host":"mall.film-ticket.schedule.list","X-Token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhZ2VudElkIjoiMzAwMCIsInRpbWVzdGFtcCI6MTY2NDM0NzU3NCwidXNlcklkIjozMTkyMDU5N30.25T6y93Pt5RFo5U-Z5jJBtkKIo4RATWrY-vcHHmXSD4"}},!1).then((e=>{this.show=!1,e.data.data&&this.$set(this.schedules,t,e.data.data.schedules)}))},currenDate(t,e){return u()(t,e)}}},d=h,m=s(4068),p=(0,m.A)(d,a,i,!1,null,"d4fdcb82",null),f=p.exports}}]);